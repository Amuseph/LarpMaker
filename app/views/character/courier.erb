<%= provide(:title, 'Couriers') %>
<div class="container col-12" id="courierpage">
  <div class="row">
    <div class="pagetitle">Courier Mailbox</div>
  </div>
  <div class="row">
    <div class="pagesubtitle" >A list of letters and between game skills sent</div>
  </div>

  <% if !get_between_game_skills_locked %>
    <div class="row justify-content-md-center">
      <div class="col-md-2 justify-content-md-center">
        <div class='courierbutton'>
          <%= link_to character_sendbetweengame_path, remote: true do %>
            <div>
              <%= image_tag 'charactersheet/edit.png', size: '25x25', class: 'center-block' %> - Send Between Game
            </div>
          <% end %>
        </div>
      </div>
      <div class="col-md-2">
        <% if couriers_available() > 0 %>
          <div class="courierbutton">
            <%= link_to character_sendcourier_path, remote: true do %>
              <div>
                <%= image_tag 'charactersheet/edit.png', size: '25x25', class: 'center-block' %> - Send Courier
              </div>
            <% end %>
          </div>
        <% end %>
      


      </div>
    </div>
  <% end %>
  <br>


































  
  <div class="row">
    <div class="table-responsive">
      <table class="table table-striped table-hover table-bordered table-sm">
        <thead class="thead-dark">
          <tr>
            <th>Type</th>
            <th>Recipient</th>
            <th>Destination</th>
            <th>Send Date</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @character.courier.each do |courier| %>
            <tr class="table-light">
              <td><%= courier.couriertype %></td>
              <td><%= courier.recipient %></td>
              <td> <%= 
                if courier.couriertype == 'Courier'
                  courier.destination
                else
                  ''
                end
                %>
              </td>
              <td><%= courier.senddate.in_time_zone('Eastern Time (US & Canada)').strftime('%m/%d/%Y') %></td>
              <td>
                <%= link_to 'Read Message', character_viewcourier_path(courier_id: courier.id), remote: true  %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="modal fade" id="sendCourierModal" tabindex="-1" role="dialog" aria-labelledby="sendCourierModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="sendCourierModalLabel">Send New Courier</h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div> 
      <div class="modal-body" id="sendCourierModalBody"></div>
    </div>
  </div>
</div>

<div class="modal fade" id="viewCourierModal" tabindex="-1" role="dialog" aria-labelledby="viewCourierModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewCourierModalLabel">Read Courier</h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div> 
      <div class="modal-body" id="viewCourierModalBody"></div>
    </div>
  </div>
</div>