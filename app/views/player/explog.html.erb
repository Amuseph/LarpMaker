<%= provide(:title, 'XP Log') %>
<div class="container col-12">
  <div class="pagetitle">XP Log</div>
  <div class="pagesubtitle" >A Record of Experience Earned</div>

  <div class='container col-10 text-right' id = 'transferxplink'>
    <%= transfer_xp_link %>
  </div>
  <div class="container col-10">
    <div class="row bg-light">
      <div class="col-sm">
        Total Available XP: <%= available_xp %>
      </div>
      <div class="col-sm">
        Total Earned XP: <%= total_xp %>
      </div>
    </div>
  </div>

  <table class="table table-hover table-bordered table-sm">
    <thead class = 'thead-dark'>
      <tr>
          <th scope="col">Name</th>
          <th scope="col">Description</th>
          <th scope="col">Acquire Date</th>
          <th scope="col">Amount</th>
      </tr>
    </thead>
    <tbody>
      <% current_user.explogs.each do |explog| %>
        <% if (explog.acquiredate > Time.now) %>
          <tr class = 'table-secondary'>
        <% elsif (explog.amount < 0) %>
          <tr class = 'table-danger'>
        <% else %>
          <tr class = 'table-success'>
        <% end %>
        
          <td><%= explog.name %></td>
          <td><%= explog.description %></td>
          <td><%= explog.acquiredate.in_time_zone('Eastern Time (US & Canada)').strftime('%m/%d/%Y') %></td>
          <td><%= explog.amount %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>